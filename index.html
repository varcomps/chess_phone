<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CHESS STRATEGY REDUX</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="turn-banner">ВАШ ХОД</div>
<div id="game-toast">Сообщение</div>
<div id="ui-tooltip"></div>
<div id="swipe-zone"></div>

<div id="slash-overlay">
    <div class="slash-line"></div>
    <div class="slash-flash"></div>
</div>

<div id="forge-ui">
    <button onclick="useForge()" style="background: linear-gradient(to right, #e67e22, #d35400);">⚒️ КОВАТЬ (2мет, 2уг)</button>
</div>

<div id="academy-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <h2 style="color: #f1c40f; margin:0 0 15px 0;">ВЕРБОВКА (1 ОД)</h2>
        <div style="margin-bottom: 15px;">
            <div style="color:#aaa; font-size:0.8em; margin-bottom:5px; text-transform:uppercase;">Стандарт (2 Бумаги 📜)</div>
            <div class="promo-options" id="acad-std-options"></div>
        </div>
        <div id="acad-elite-section" class="hidden">
            <div style="color:gold; font-size:0.8em; margin-bottom:5px; text-transform:uppercase;">Элита (5 Бумаги 📜)</div>
            <div class="promo-options" id="acad-elite-options"></div>
        </div>
        <button onclick="closeModal('academy-modal')" style="margin-top:20px; background:#c0392b; width:100%;">ОТМЕНА</button>
    </div>
</div>

<div id="promotion-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <h2 style="color: #f1c40f; margin:0;">ВЫБЕРИ СУДЬБУ</h2>
        <div class="promo-options" id="promo-options-container"></div>
    </div>
</div>

<div id="victory-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <div id="victory-title" style="font-size:2.5em; font-weight:900; margin-bottom:20px; text-shadow:0 0 20px currentColor;"></div>
        <button onclick="location.reload()" style="font-size: 1.2em; padding: 15px 40px; background: #fff; color:#000;">ЕЩЁ РАЗ</button>
    </div>
</div>

<div id="connection-overlay">
    <canvas id="menu-canvas"></canvas>
    <div id="connection-card">
        <div>
            <div class="conn-title">CHESS</div>
            <div style="color: #888; font-size: 0.8em; letter-spacing: 6px; text-transform: uppercase;">Tactical Warfare</div>
        </div>
        
        <div class="conn-input-wrapper">
            <div class="conn-label">Access Code</div>
            <input type="number" id="room-code" placeholder="000000" maxlength="6">
        </div>
        
        <div class="conn-actions">
            <button class="connect-btn btn-create" onclick="createGame()">СОЗДАТЬ</button>
            <button class="connect-btn btn-join" onclick="joinGame()">ВОЙТИ</button>
        </div>
    </div>
</div>

<div id="game-layout">
    <div class="ui-container">
        <div class="ui">
            <div id="status">ОЖИДАНИЕ...</div>
            
            <div id="resource-panel">
                <div class="res-item res-wood"><span>🪵</span> <span id="res-wood-val">0</span>/5</div>
                <div class="res-item res-stone"><span>🧱</span> <span id="res-stone-val">0</span>/5</div>
                <div class="res-item res-metal"><span>⛓️</span> <span id="res-metal-val">0</span>/5</div>
                <div class="res-item res-cedar"><span>🌲</span> <span id="res-cedar-val">0</span>/5</div>
                <div class="res-item res-paper"><span>📜</span> <span id="res-paper-val">0</span>/5</div>
                <div class="res-item res-food"><span>🍞</span> <span id="res-food-val">0</span>/5</div>
                <div class="res-item res-gem"><span>💎</span> <span id="res-gem-val">0</span>/5</div>
                <div class="res-item res-coal"><span>⚫</span> <span id="res-coal-val">0</span>/5</div>
                <div class="res-item res-poly"><span>🧪</span> <span id="res-poly-val">0</span>/5</div>
            </div>

            <button id="btn-apogee" onclick="activateApogee()">☄️ АПОГЕЙ</button>
            <button id="btn-camp-recruit" onclick="recruitPawn()">⚔️ НАЕМНИК (2еды)</button>
        </div>
    </div>

    <div id="board-wrapper">
        <div id="board"></div>
    </div>
</div>

<div id="build-menu-container">
    <div class="menu-tabs">
        <div class="tab-btn active" id="tab-btn-build" onclick="switchTab('build')">СТРОЙ</div>
        <div class="tab-btn" id="tab-btn-upgrade" onclick="switchTab('upgrade')">УЛУЧШ</div>
        <div class="tab-btn" id="tab-btn-elite" onclick="switchTab('elite')">ЭЛИТА</div>
    </div>
    
    <div id="build-list">
        <div class="build-group group-build active">
            <div class="build-item demol-item" data-type="demolish" data-label="СНОС" data-cost="1 ОД" onpointerdown="onSidebarPointerDown(event, 'demolish')"><span class="icon">🧨</span></div>
            <div id="btn-build-hq" class="build-item t1-item" data-type="hq" data-label="ШТАБ (БАЗА)" data-cost="4 Камня, 2 Дерева | 1 ОД" onpointerdown="onSidebarPointerDown(event, 'hq')"><span class="icon">🏰</span></div>
            <div class="build-item t1-item" data-type="fortress" data-label="СТЕНА" data-cost="4 Камня | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'fortress')"><span class="icon">🧱</span></div>
            <div class="build-item t1-item" data-type="camp" data-label="ЛАГЕРЬ" data-cost="3 Дерева, 1 ОД | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'camp')"><span class="icon">⛺</span></div>
            <div class="build-item t1-item" data-type="lumber" data-label="ЛЕСОПОВАЛ" data-cost="1 ОД" onpointerdown="onSidebarPointerDown(event, 'lumber')"><span class="icon">🪓</span></div>
            <div class="build-item t1-item" data-type="mine" data-label="РУДНИК" data-cost="1 ОД" onpointerdown="onSidebarPointerDown(event, 'mine')"><span class="icon">⛏️</span></div>
            <div class="build-item t1-item" data-type="farm" data-label="ФЕРМА" data-cost="2 Дерева | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'farm')"><span class="icon">🌾</span></div>
            <div class="build-item t1-item" data-type="papermill" data-label="ПЕЧАТНЯ" data-cost="2 Камня, 2 Дерева | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'papermill')"><span class="icon">📜</span></div>
        </div>

        <div class="build-group group-upgrade">
            <div class="build-item demol-item" data-type="demolish" data-label="СНОС" data-cost="1 ОД" onpointerdown="onSidebarPointerDown(event, 'demolish')"><span class="icon">🧨</span></div>
            <div class="build-item t2-item" data-type="academy" data-label="АПГРЕЙД: АКАДЕМИЯ" data-cost="4 Дер, 4 Кам, 2 Мет | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'academy')"><span class="icon">🎓</span></div>
            <div class="build-item t2-item" data-type="lumber_t2" data-label="АПГРЕЙД: ЛЕСОПИЛКА T2" data-cost="4 Дер, 2 Кам | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'lumber_t2')"><span class="icon">🌲</span></div>
            <div class="build-item t2-item" data-type="mine_t2" data-label="АПГРЕЙД: ШАХТА T2" data-cost="4 Кам, 2 Дер | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'mine_t2')"><span class="icon">🏗️</span></div>
            <div class="build-item t2-item" data-type="fortress_t2" data-label="АПГРЕЙД: БАСТИОН" data-cost="4 Кам, 2 Мет | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'fortress_t2')"><span class="icon">🛡️</span></div>
            <div class="build-item t2-item" data-type="furnace" data-label="ПЕЧЬ" data-cost="3 Кам, 1 Мет | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'furnace')"><span class="icon">🔥</span></div>
        </div>

        <div class="build-group group-elite">
            <div class="build-item demol-item" data-type="demolish" data-label="СНОС" data-cost="1 ОД" onpointerdown="onSidebarPointerDown(event, 'demolish')"><span class="icon">🧨</span></div>
            <div class="build-item t3-item" data-type="academy_t2" data-label="АПГРЕЙД: УНИВЕРСИТЕТ" data-cost="2 Пол, 2 Алм, 2 Кедр | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'academy_t2')"><span class="icon">🏛️</span></div>
            <div class="build-item t3-item" data-type="lumber_t3" data-label="ЗАВОД ПОЛИМЕРОВ" data-cost="4Д, 2К, 2М, 2Кедр | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'lumber_t3')"><span class="icon">🧬</span></div>
            <div class="build-item t3-item" data-type="mine_t3" data-label="АЛМАЗНЫЙ БУР" data-cost="2Д, 4К, 2М, 2Кедр | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'mine_t3')"><span class="icon">💎</span></div>
            <div class="build-item t3-item" data-type="fortress_t3" data-label="АПГРЕЙД: ЦИТАДЕЛЬ" data-cost="5 Кам, 5 Мет | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'fortress_t3')"><span class="icon">🏯</span></div>
            <div class="build-item t3-item" data-type="forge" data-label="КУЗНЯ БОГОВ" data-cost="5Д, 5М, 5Уг, 5Алм | 2 ОД" onpointerdown="onSidebarPointerDown(event, 'forge')"><span class="icon">⚒️</span></div>
        </div>
    </div>
</div>

<script type="module" src="main.js"></script>
</body>
</html>